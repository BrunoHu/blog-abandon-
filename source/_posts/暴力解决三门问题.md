title: 暴力解决三门问题
date: 2015-12-29 17:56:30
tags:
- math
---

# 三门问题介绍
我觉得大部分人应该听过这个有趣的问题，但是，一开始我还是简要的说明一下什么是三门问题。假设有一个电视节目，设置了三个一模一样的关闭着的门，其中有个门后面有辆兰博基尼作为奖品，而且每个门后面有奖品的概率相同，并且。现在你要选择一个，然后，主持人会在另外两扇门中打开一扇空门问你要不要更换选择。

>          换还是不换呢，这是个问题
>                          --Shakespeare Hu

我不知道你们的第一反映是换还是不换，反正我第一次碰到这个问题的时候我觉得换不换概率是一样的。但是实际的答案告诉我我还是too young too simple。虽然我后面也自己想明白了为什么应该换，但是，违反直觉和多年以来的选择题不更改定律的东西，我心里实在是没底，所以我突然想起我可以用计算机模拟一下，简单暴力的看看到底应不应该换。

# 计算机模拟
python提供了非常接近于自然语言的计算机高级语言，我觉得下面的代码哪怕是没怎么学过计算机大概都能猜得到是什么意思，所以我就不注释了
```
import random

turns = 100000
doors = [1, 2, 3]
hit = {'change':0, 'unchange':0}

for i in range(turns):
    pick = random.choice(doors)
    result = random.choice(doors)
    if pick == result:
        hit['unchange'] += 1
    else:
        hit['change'] += 1
    hit_rate_change = float(hit['change'])/float(i+1)
    hit_rate_unchange = float(hit['unchange'])/float(i+1)
    print 'this is the %d turns, the true is %d, and the random pick is %d' % (i,result,pick)
    print 'the change hit rate is %f, and the unchange one is %f' % (hit_rate_change,hit_rate_unchange)
```
实验了十万次后，结果是不更换的话，猜中的概率是三分之一，更换的话，猜中的概率是三分之二。现在我终于放心的可以用这个结论去装逼了。

# 不暴力的解释
解释1： 我们用最正统最简单的概率论知识就可以得到这个违反直觉的结论。首先，你第一次选择到空门的概率是三门之二，而此时如果换门的话，必定会得到车子，而不换门一定没有车子。反过来，一开始如果你很幸运，以三分之一的概率选到了有车子的那个门，那么换门的话到嘴的鸭子就飞了，而坚持选择，你就得到了车子。
那么很显然的，不换门得到兰博基尼的概率是：2/3 × 0 + 1/3 × 1 = 1/3
而换门得到兰博基尼的概率是：2/3 × 1 + 1/3 × 0 = 2/3
和我们模拟出来的结果相同。

解释2： 因为自己选的门只有三分之一的概率正确，那么剩下那个就是三分之二。

解释3： 因为主持人开空门这个行为并不是随机的。

# 三门问题的小花边
三门问题其实正式点的称呼是“蒙提霍尔问题”（Monty Hall dilemma），来自 Craig F. Whitaker 于1990年寄给《展示杂志》（Parade Magazine）玛丽莲·沃斯·莎凡特（Marilyn vos Savant）专栏的信件。玛丽莲·沃斯·莎凡特在她专栏的回答是改选会更有优势，这在美国引起了激烈的争议：人们寄来了数千封抱怨信，很多寄信人是科学老师或学者。一位来自佛罗里达大学的读者写道：“这个国家已经有够多的数学文盲了，我们不想再有个世界上智商最高的人来充数！真让人羞愧！”另一个人写道：“我看你就是那只山羊！”美国陆军研究所(US Army Research Institute)的埃弗雷特·哈曼(Everett Harman)写道，“如果连博士都要出错，我看这个国家马上要陷入严重的麻烦了。”
这说明我的智商和很多美国教授是一个水平的，我非常开心。

# 类似的小问题
还有一个很有意思的信封问题，大致是这样的：
有一天一个程序员去领奖金，他老板给他凑了个整，放了1024元在信封里。而且，老板神秘兮兮的和猿说：“我给你一个额外的bonus，我手里还有另外一份奖金，是你手里的两倍或者二分之一，每种可能的概率相同，你要不要换一份。”猿想了一会，算了算数学期望，（2+0.5）/2=1.25，然后高呼老板万岁，换了一份。然后老板又说：“你要是觉得亏了还可以换回来，我把信封放在这里，先回去了。”然后，程序员不小心又算了一下期望。。。
第二天，老板回办公室的时候，发现程序猿同学还在算期望中。
大家觉得应该怎么换比较好，这个一直换的程序猿同学到底哪里错了呢。

